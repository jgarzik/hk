# User crate build configuration
# Builds a static PIE (position-independent executable)
# The kernel chooses the load address at runtime

[target.x86_64-unknown-linux-gnu]
rustflags = [
    "-C", "relocation-model=pie",
    "-C", "target-feature=+crt-static",
    "-C", "link-arg=-nostartfiles",
    "-C", "link-arg=-static-pie",
]

[target.aarch64-unknown-linux-gnu]
linker = "aarch64-linux-gnu-gcc-14"
rustflags = [
    "-C", "relocation-model=pie",
    "-C", "target-feature=+crt-static",
    "-C", "link-arg=-nostartfiles",
    "-C", "link-arg=-static-pie",
]
